---
substitutions:
  name: "econet-hvac"
  friendly_name: "Rheem HVAC"
  device_description: "Rheem HVAC"
  thermostat_address: "0x380"
  wifi_module_address: "0x340"

packages:
  econet: !include econet_base.yaml

econet:
  dst_address: ${thermostat_address}

sensor:
  - platform: econet
    name: "Airhandler CFM"
    id: airhandler_cfm
    icon: "mdi:fan"
    sensor_datapoint: F_ACTCFM
    unit_of_measurement: "cfm"
    state_class: "measurement"
    entity_category: "diagnostic"
    filters:
      - delta: 9.9
  - platform: econet
    name: "Airhandler RPM"
    icon: "mdi:fan"
    id: airhandler_rpm
    sensor_datapoint: F_ACTRPM
    state_class: "measurement"
    entity_category: "diagnostic"
    filters:
      - delta: 9.9
  - platform: econet
    name: "Static Pressure"
    id: static_pressure
    icon: "mdi:air-filter"
    sensor_datapoint: STATIC_P
    accuracy_decimals: 6
    unit_of_measurement: "in"
    state_class: "measurement"
    entity_category: "diagnostic"
    filters:
      - delta: 0.02
  - platform: econet
    name: "Thermostat Current Humidity"
    id: thermostat_current_humidity
    sensor_datapoint: RELH7005
    unit_of_measurement: "%"
    accuracy_decimals: 1
    device_class: "humidity"
    state_class: "measurement"

text_sensor:
  - platform: econet
    name: "Operating Mode"
    id: operating_mode
    icon: "mdi:hvac"
    sensor_datapoint: HVACMODE
  - platform: econet
    name: "Auto Mode"
    id: auto_mode
    icon: "mdi:hvac"
    sensor_datapoint: AUTOMODE
  - id: !extend sw_version
    name: "Thermostat SW Version"
    src_address: ${thermostat_address}
  - platform: econet
    name: "WiFi SW Version"
    id: wifi_sw_version
    sensor_datapoint: SW_VERSN
    src_address: ${wifi_module_address}
    request_mod: none
    icon: "mdi:information-box"
    entity_category: "diagnostic"

switch:
  - platform: econet
    name: "Dehumidification Enable State"
    id: dehumidification_enable_state
    switch_datapoint: DHUMENAB
    icon: "mdi:air-humidifier-off"
  - platform: econet
    name: "Follow Schedule"
    id: schedule
    switch_datapoint: SCHEDULE
